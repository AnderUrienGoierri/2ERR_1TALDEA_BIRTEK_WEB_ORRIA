CREATE TABLE IF NOT EXISTS eskaerak (
    id_eskaera INT UNSIGNED AUTO_INCREMENT PRIMARY KEY,
    bezeroa_id INT UNSIGNED NOT NULL,
    data TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    egoera ENUM('Jasota', 'Prestatzen', 'Bidalita', 'Osatua/Bidalita', 'Gidatzen', 'Bertan Behera', 'Ezabatua') DEFAULT 'Jasota',
    guztira DECIMAL(10, 2),
    
    CONSTRAINT fk_eskaera_bezeroa FOREIGN KEY (bezeroa_id) REFERENCES bezeroak(id_bezeroa)
);

INSERT INTO eskaerak (id_eskaera, bezeroa_id, data, egoera, guztira) VALUES
(1, 1, '2024-01-10 10:00:00', 'Osatua/Bidalita', 2199.00),
(2, 2, '2024-01-11 12:30:00', 'Prestatzen', 1499.00),
(3, 1, '2024-01-12 15:45:00', 'Jasota', 1850.00),
(4, 3, '2024-01-12 16:00:00', 'Osatua/Bidalita', 1209.00),
(5, 4, '2024-01-13 09:20:00', 'Jasota', 799.00),
(6, 4, '2024-01-15 11:00:00', 'Osatua/Bidalita', 650.00),
(7, 2, '2024-01-18 14:15:00', 'Jasota', 999.00),
(8, 5, '2024-01-20 10:30:00', 'Osatua/Bidalita', 450.00),
(9, 1, '2024-01-25 08:00:00', 'Osatua/Bidalita', 499.00),
(10, 2, '2024-02-01 16:40:00', 'Osatua/Bidalita', 600.00),
(11, 3, '2024-02-05 09:15:00', 'Prestatzen', 135.00),
(12, 4, '2024-02-05 11:30:00', 'Osatua/Bidalita', 450.00),
(13, 1, '2024-02-10 14:20:00', 'Osatua/Bidalita', 2499.00),
(14, 5, '2024-02-12 10:10:00', 'Prestatzen', 89.00),
(15, 2, '2024-02-15 12:00:00', 'Osatua/Bidalita', 120.00),
(16, 3, '2024-02-20 15:30:00', 'Osatua/Bidalita', 2499.00),
(17, 4, '2024-02-28 09:45:00', 'Prestatzen', 1400.00),
(18, 5, '2024-03-01 11:20:00', 'Osatua/Bidalita', 550.00),
(19, 1, '2024-03-05 13:40:00', 'Osatua/Bidalita', 15.00),
(20, 2, '2024-03-10 16:10:00', 'Ezabatua', 35.00),
(21, 3, '2024-03-10 17:00:00', 'Osatua/Bidalita', 1250.00),
(22, 4, '2024-03-12 10:30:00', 'Jasota', 550.00),
(23, 5, '2024-03-15 14:00:00', 'Osatua/Bidalita', 320.00),
(24, 1, '2024-03-20 09:15:00', 'Osatua/Bidalita', 1800.00),
(25, 2, '2024-04-01 11:40:00', 'Prestatzen', 650.00),
(26, 3, '2024-04-01 12:20:00', 'Osatua/Bidalita', 75.00),
(27, 4, '2024-04-05 15:00:00', 'Osatua/Bidalita', 1500.00),
(28, 5, '2024-04-05 16:30:00', 'Prestatzen', 2200.00),
(29, 1, '2024-04-10 10:00:00', 'Osatua/Bidalita', 60.00),
(30, 2, '2024-04-15 12:45:00', 'Osatua/Bidalita', 1200.00);

CREATE TABLE IF NOT EXISTS eskaera_lerroak (
    id_eskaera_lerroa INT UNSIGNED AUTO_INCREMENT PRIMARY KEY,
    eskaera_id INT UNSIGNED NOT NULL,
    produktua_id INT UNSIGNED NOT NULL,
    kantitatea INT UNSIGNED NOT NULL,
    prezio_unitarioa DECIMAL(10, 2) NOT NULL,
    egoera ENUM('Jasota', 'Prestatzen', 'Bidalita', 'Osatua/Bidalita', 'Gidatzen', 'Bertan Behera', 'Ezabatua') DEFAULT 'Jasota',
    
    CONSTRAINT fk_eskaera_lerroa_eskaera FOREIGN KEY (eskaera_id) REFERENCES eskaerak(id_eskaera),
    CONSTRAINT fk_eskaera_lerroa_produktua FOREIGN KEY (produktua_id) REFERENCES produktuak(id_produktua)
);

INSERT INTO eskaera_lerroak (id_eskaera_lerroa, eskaera_id, produktua_id, kantitatea, prezio_unitarioa, egoera) VALUES
(1, 1, 1, 1, 2199.00, 'Osatua/Bidalita'),
(2, 2, 2, 1, 1499.00, 'Prestatzen'),
(3, 3, 3, 1, 1850.00, 'Jasota'),
(4, 4, 11, 1, 2499.00, 'Osatua/Bidalita'),
(5, 5, 24, 1, 799.00, 'Jasota'),
(6, 6, 27, 1, 650.00, 'Osatua/Bidalita'),
(7, 7, 28, 1, 999.00, 'Jasota'),
(8, 8, 29, 1, 450.00, 'Osatua/Bidalita'),
(9, 9, 30, 1, 499.00, 'Osatua/Bidalita'),
(10, 10, 32, 1, 600.00, 'Osatua/Bidalita'),
(11, 11, 58, 1, 135.00, 'Prestatzen'),
(12, 12, 29, 1, 450.00, 'Osatua/Bidalita'),
(13, 13, 11, 1, 2499.00, 'Osatua/Bidalita'),
(14, 14, 77, 1, 89.00, 'Prestatzen'),
(15, 15, 80, 1, 120.00, 'Osatua/Bidalita'),
(16, 16, 11, 1, 2499.00, 'Osatua/Bidalita'),
(17, 17, 2, 1, 1400.00, 'Prestatzen'),
(18, 18, 61, 1, 550.00, 'Osatua/Bidalita'),
(19, 19, 66, 1, 15.00, 'Osatua/Bidalita'),
(20, 20, 70, 1, 25.00, 'Ezabatua'),
(21, 20, 71, 2, 10.00, 'Ezabatua'),
(22, 21, 4, 1, 950.00, 'Osatua/Bidalita'),
(23, 21, 54, 1, 300.00, 'Osatua/Bidalita'),
(24, 22, 34, 1, 900.00, 'Prestatzen'),
(25, 23, 62, 1, 320.00, 'Osatua/Bidalita'),
(26, 24, 17, 1, 1800.00, 'Osatua/Bidalita'),
(27, 25, 27, 1, 650.00, 'Prestatzen'),
(28, 26, 79, 1, 75.00, 'Osatua/Bidalita'),
(29, 27, 49, 1, 1500.00, 'Osatua/Bidalita'),
(30, 28, 48, 1, 2200.00, 'Prestatzen'),
(31, 29, 54, 1, 60.00, 'Osatua/Bidalita'),
(32, 30, 50, 1, 1200.00, 'Osatua/Bidalita');
